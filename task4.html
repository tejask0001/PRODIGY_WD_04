<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forecast</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Segoe UI",sans-serif;
}

body{
  min-height:100vh;
  color:#fff;
  background-size:cover;
  background-position:center;
  transition:background-image .6s ease;
}

/* TOP BAR */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 40px;
}

.brand h2{font-weight:500}

/* SEARCH */
.search-box{
  background:#0e2236;
  padding:10px 16px;
  border-radius:30px;
  display:flex;
  align-items:center;
  gap:10px;
}

.search-box input,
.search-box select{
  background:#0e2236;
  border:none;
  outline:none;
  color:#fff;
  font-size:14px;
}

.search-box select{
  appearance:none;
  cursor:pointer;
  max-height:120px;
}

.search-box option{
  background:#0e2236;
  color:#fff;
}

.toggle{
  background:#fff;
  color:#000;
  padding:4px 10px;
  border-radius:20px;
  font-size:13px;
  cursor:pointer;
}

.loc-btn{
  background:#1e90ff;
  border:none;
  color:#fff;
  padding:6px 12px;
  border-radius:20px;
  cursor:pointer;
  font-size:13px;
}

/* MAIN */
.main{
  text-align:center;
  padding-top:40px;
}

.city{font-size:42px}
.temp{font-size:72px;margin:10px 0}
.desc{font-size:22px;text-transform:capitalize}

/* PILLS */
.pills{
  margin:30px auto;
  max-width:1100px;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:12px;
}

.pill{
  background:#fff;
  color:#000;
  padding:6px 14px;
  border-radius:999px;
  font-size:14px;
}

/* DAILY */
.daily{margin-top:40px}

.forecast{
  display:flex;
  justify-content:center;
  gap:40px;
  flex-wrap:wrap;
}

.day{text-align:center}
.day img{width:45px}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="brand">
    <h2>â›„ Forecast</h2>
  </div>

  <div class="search-box">
    <input id="search" placeholder="Search city..." />

    <select id="cities">
      <option value="">Cities</option>
      <option>Delhi</option>
      <option>Noida</option>
      <option>Faridabad</option>
      <option>Gurugram</option>
      <option>Ghaziabad</option>
      <option>Greater Noida</option>
      <option>Agra</option>
      <option>Mathura</option>
      <option>Lucknow</option>
      <option>Kanpur</option>
      <option>Meerut</option>
      <option>Mumbai</option>
      <option>Bengaluru</option>
      <option>Chennai</option>
      <option>Kolkata</option>
      <option>Hyderabad</option>
      <option>Pune</option>
      <option>Jaipur</option>
      <option>Chandigarh</option>
      <option>Shimla</option>
    </select>

    <button class="loc-btn" id="locationBtn">Use my location</button>
    <div class="toggle" id="toggle">Â°C</div>
  </div>
</div>

<!-- MAIN -->
<div class="main">
  <div class="city" id="city">Delhi</div>
  <div class="temp" id="temp">--Â°C</div>
  <div class="desc" id="desc">---</div>

  <div class="pills" id="pills"></div>

  <div class="daily">
    <h3>Daily</h3>
    <div class="forecast" id="forecast"></div>
  </div>
</div>

<script>
const API_KEY = "21f4337a8e5ed5b538a43c64869c6c00"; // ðŸ”‘ ADD YOUR KEY

let isCelsius=true;
let currentTemp=0;

const cityEl=document.getElementById("city");
const tempEl=document.getElementById("temp");
const descEl=document.getElementById("desc");
const pillsEl=document.getElementById("pills");
const forecastEl=document.getElementById("forecast");
const search=document.getElementById("search");
const toggle=document.getElementById("toggle");
const cities=document.getElementById("cities");
const locationBtn=document.getElementById("locationBtn");

/* EVENTS */
search.addEventListener("keypress",e=>{
  if(e.key==="Enter") loadWeather(search.value);
});

cities.addEventListener("change",()=>{
  if(cities.value) loadWeather(cities.value);
});

toggle.addEventListener("click",()=>{
  isCelsius=!isCelsius;
  toggle.textContent=isCelsius?"Â°C":"Â°F";
  updateTemp();
});

locationBtn.addEventListener("click",getLocationWeather);

/* TEMP */
function updateTemp(){
  tempEl.textContent=isCelsius
    ? `${currentTemp.toFixed(1)}Â°C`
    : `${(currentTemp*9/5+32).toFixed(1)}Â°F`;
}

/* BACKGROUND (FIXED FOR HAZE) */
function setBackground(type){
  const bg={
    Clear:"https://images.unsplash.com/photo-1502082553048-f009c37129b9",
    Clouds:"https://images.unsplash.com/photo-1501630834273-4b5604d2ee31",
    Rain:"https://images.unsplash.com/photo-1504384308090-c894fdcc538d",
    Snow:"https://images.unsplash.com/photo-1601758123927-14e74ec47b86",
    Haze:"https://images.unsplash.com/photo-1485236715568-ddc5ee6ca227",
    Mist:"https://images.unsplash.com/photo-1485236715568-ddc5ee6ca227",
    Fog:"https://images.unsplash.com/photo-1485236715568-ddc5ee6ca227",
    Smoke:"https://images.unsplash.com/photo-1485236715568-ddc5ee6ca227"
  };

  document.body.style.backgroundImage =
    `linear-gradient(rgba(15,35,55,.7),rgba(15,35,55,.7)),
     url('${bg[type] || bg.Clouds}')`;
}

/* WEATHER */
async function loadWeather(city){
  const res=await fetch(
    `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`
  );
  const data=await res.json();
  if(data.cod!==200) return alert("City not found");

  cityEl.textContent=data.name;
  currentTemp=data.main.temp;
  updateTemp();
  descEl.textContent=data.weather[0].description;
  setBackground(data.weather[0].main);
  renderPills(data);
  loadForecast(city);
}

/* LOCATION */
function getLocationWeather(){
  navigator.geolocation.getCurrentPosition(async pos=>{
    const {latitude,longitude}=pos.coords;
    const res=await fetch(
      `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=metric`
    );
    const data=await res.json();
    cityEl.textContent=data.name;
    currentTemp=data.main.temp;
    updateTemp();
    descEl.textContent=data.weather[0].description;
    setBackground(data.weather[0].main);
    renderPills(data);
    loadForecast(data.name);
  },()=>alert("Location permission denied"));
}

/* PILLS */
function renderPills(d){
  pillsEl.innerHTML=`
    <div class="pill">Feels ${d.main.feels_like}Â°C</div>
    <div class="pill">Humidity ${d.main.humidity}%</div>
    <div class="pill">Wind ${d.wind.speed} km/h</div>
    <div class="pill">Pressure ${d.main.pressure}</div>
  `;
}

/* FORECAST */
async function loadForecast(city){
  const res=await fetch(
    `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${API_KEY}&units=metric`
  );
  const data=await res.json();
  forecastEl.innerHTML="";
  const days={};

  data.list.forEach(i=>{
    const d=new Date(i.dt_txt).toDateString();
    if(!days[d]) days[d]=i;
  });

  Object.values(days).slice(0,6).forEach(d=>{
    forecastEl.innerHTML+=`
      <div class="day">
        <img src="https://openweathermap.org/img/wn/${d.weather[0].icon}@2x.png">
        <div>${Math.round(d.main.temp)}Â°C</div>
        <div>${d.weather[0].main}</div>
      </div>`;
  });
}

/* DEFAULT */
loadWeather("Delhi");
</script>

</body>
</html>



